package io.github.sinri.keel.core.json;

import io.vertx.core.json.JsonObject;
import io.vertx.core.shareddata.Shareable;

import javax.annotation.Nonnull;


/**
 * An interface representing an unmodifiable entity that can be converted to a JSON object.
 * This interface extends {@link Iterable} and {@link Shareable}, providing methods to read various types of values from
 * the underlying JSON structure.
 *
 * @since 3.0.0
 */
public interface UnmodifiableJsonifiableEntity
        extends JsonObjectReadable, JsonSerializable, Shareable {
    static UnmodifiableJsonifiableEntity wrap(@Nonnull JsonObject jsonObject) {
        return new UnmodifiableJsonifiableEntityImpl(jsonObject);
    }

    /**
     * A COPIED {@link JsonObject} instance generated as required; should not be a cached value.
     * <p>
     * By default, it is designed to be regenerated from the JSON expression by
     * {@link JsonSerializable#toJsonExpression()}.
     *
     * @return A JSON Object composed by the string generated by
     *         `io.github.sinri.keel.core.json.UnmodifiableJsonifiableEntity#toJsonExpression()`.
     * @since 3.2.17
     */
    @Nonnull
    default JsonObject cloneAsJsonObject() {
        return new JsonObject(toJsonExpression());
    }

}
